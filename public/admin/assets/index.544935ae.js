import{l as h}from"./logo.0d0e3826.js";import{_ as x,d as w,u as b,a as F,b as y,r as _,c as B,o as $,e as C,f as k,g as c,h as i,i as D,w as d,j as g,k as E,l as S}from"./index.5d02c90a.js";const U={class:"main"},G={class:"m-4"},L={class:"flex space-x-3 mt-12"},N=g(" Github "),V=g(" Gitee "),z=w({__name:"index",setup(M){const o=b(),v=F(),p=y(),n=_(!1),f=B(),u=_(null);function l(t){var a,s;console.log(t);const e=t.data.data;((a=e==null?void 0:e.access_token)==null?void 0:a.length)>0?(f.saveUserData(e),o.success("\u767B\u5F55\u6210\u529F\uFF0C\u5373\u5C06\u8FDB\u5165\u7CFB\u7EDF"),p.replace("/")):o.error(((s=t.data)==null?void 0:s.message)||"\u767B\u5F55\u5931\u8D25"),n.value=!1,u.value&&u.value.destroy()}$(()=>{window.removeEventListener("message",l)});function r(t="github"){o.destroyAll(),n.value=!0,u.value=o.loading("\u767B\u5F55\u4E2D...",{duration:0});const e={width:700,height:700,left:(window.screen.availWidth-30-500)/2,top:(window.screen.availHeight-30-500)/2};window.open(`${v.baseUrl}/auth/oauth/${t}`,"Login",`height=${e.height}, width=${e.width}, top=${e.top}, left=${e.left}, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no`),window.addEventListener("message",l,!0)}return(t,e)=>{const a=E,s=S;return C(),k("div",U,[c("div",G,[i(a,{class:"m-auto flex cursor-pointer avatar",size:72,src:D(h)},null,8,["src"])]),c("div",L,[i(s,{loading:n.value,onClick:e[0]||(e[0]=m=>r("github")),class:"btn flex-1",tertiary:!0},{default:d(()=>[N]),_:1},8,["loading"]),i(s,{loading:n.value,onClick:e[1]||(e[1]=m=>r("gitee")),class:"btn flex-1",tertiary:!0},{default:d(()=>[V]),_:1},8,["loading"])])])}}});var A=x(z,[["__scopeId","data-v-75f62950"]]);export{A as default};
