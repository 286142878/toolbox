var ee=Object.defineProperty,ue=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var P=(l,o,u)=>o in l?ee(l,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[o]=u,g=(l,o)=>{for(var u in o||(o={}))ne.call(o,u)&&P(l,u,o[u]);if(k)for(var u of k(o))te.call(o,u)&&P(l,u,o[u]);return l},y=(l,o)=>ue(l,oe(o));var E=(l,o,u)=>new Promise((v,F)=>{var p=s=>{try{r(u.next(s))}catch(n){F(n)}},i=s=>{try{r(u.throw(s))}catch(n){F(n)}},r=s=>s.done?v(s.value):Promise.resolve(s.value).then(p,i);r((u=u.apply(l,o)).next())});import{D as le,T as se,B as ae}from"./TableAction.a7e8a0fe.js";import{u as x,B as R}from"./useForm.c0d75d1c.js";import{d as ie,g as ce,u as T,c as re}from"./plugin_templates.3be5fb15.js";import{c as de,f as pe,a as fe}from"./columns.edbe4636.js";import{P as me}from"./PlusOutlined.3fa0bfe3.js";import{d as _e,u as Fe,ba as ge,r as B,s as A,v as w,a2 as S,N as Be,e as De,x as he,w as t,h as a,i as d,j as h,y as ve,z as ye,l as Ee,D as we,E as Ce,n as be}from"./index.5d02c90a.js";import"./sortable.esm.ebf67857.js";import"./useDesignSetting.883c9893.js";import"./index.esm.2902f313.js";import"./DownOutlined.a77ae617.js";import"./list.a78d8f43.js";const ke=h(" \u65B0\u589E "),Pe=h("\u5237\u65B0\u6570\u636E"),xe=h("\u53D6\u6D88"),Re=h("\u786E\u5B9A"),Te={name:"PluginList"},qe=_e(y(g({},Te),{setup(l){const o=[{field:"title",labelMessage:"\u8BF7\u8F93\u5165\u9700\u8981\u641C\u7D22\u7684\u63D2\u4EF6\u6807\u9898",component:"NInput",label:"\u63D2\u4EF6\u6807\u9898",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u6807\u9898",onInput:e=>{n.title=e,console.log(e)}}},{field:"alias",labelMessage:"\u8BF7\u8F93\u5165\u9700\u8981\u641C\u7D22\u7684\u63D2\u4EF6\u522B\u540D\u8DEF\u7531",component:"NInput",label:"\u63D2\u4EF6\u522B\u540D\u8DEF\u7531",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u522B\u540D\u8DEF\u7531",onInput:e=>{n.alias=e,console.log(e)}}},{field:"class",labelMessage:"\u8BF7\u8F93\u5165\u9700\u8981\u641C\u7D22\u7684\u63D2\u4EF6\u7C7B\u540D",component:"NInput",label:"\u63D2\u4EF6\u7C7B\u540D",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u7C7B\u540D",onInput:e=>{n.class=e,console.log(e)}}}],u=Fe(),v=ge(),F=B(null),p=B(),i=B(!1),r=B(!1),s=B(!0),n=A({pageSize:10,column:"id",order:"desc",title:"",alias:"",class:""}),N=A({width:220,title:"\u64CD\u4F5C",key:"action",fixed:"right",render(e){return w(se,{style:"button",actions:[{label:"\u7F16\u8F91",type:"primary",onClick:q.bind(null,e),ifShow:()=>!0},{label:"\u5378\u8F7D",icon:le,type:"error",onClick:G.bind(null,e),ifShow:()=>!0}]})}}),[I,{}]=x({gridProps:{cols:"1 s:1 m:2 l:2 xl:3 2xl:3"},labelWidth:150,schemas:o,showAdvancedButton:!0}),[U,{getFieldsValue:C,setFieldsValue:V,setProps:M}]=x({gridProps:{cols:"1",collapsedRows:100},labelWidth:150,schemas:fe,showAdvancedButton:!1,showActionButtonGroup:!1});function O(){i.value=!0,s.value=!0,S(()=>{M({schemas:pe})})}const L=e=>E(this,null,function*(){return yield ce(g(g({},n),e))});function z({record:e,key:c,value:m}){T({id:e.id,[c]:m}).then(()=>{u.success("\u66F4\u65B0\u6210\u529F"),f()})}function K(e){console.log(e)}function f(){console.log(p),p.value.reload()}function W(e){console.log(C()),e.preventDefault(),r.value=!0;try{F.value.formElRef.validate(c=>E(this,null,function*(){if(c)u.error("\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");else{const m=C();s.value?(yield re(m),u.success("\u6DFB\u52A0\u6210\u529F")):(yield T(m),u.success("\u66F4\u65B0\u6210\u529F")),i.value=!1,f()}}))}finally{r.value=!1}}function q(e){console.log("\u70B9\u51FB\u4E86\u7F16\u8F91",e),s.value=!1,i.value=!0,S(()=>{V(y(g({},e),{config:JSON.stringify(e.config,null,4)}))})}function G(e){v.warning({title:"\u8B66\u544A",content:()=>w("div",["\u60A8\u786E\u5B9A\u8981\u5378\u8F7D ",w(Be,{type:"info"},e.title)," \u5417\uFF1F"]),positiveText:"\u786E\u8BA4",negativeText:"\u53D6\u6D88",onPositiveClick:()=>{ie({id:e.id}).then(()=>{u.success("\u5378\u8F7D\u6210\u529F"),f()})},onClose:()=>{}})}function J(e){console.log(e),p.value.updatePage(1),f()}function H(e){console.log(e),n.title=""}function Q(e){console.log(e),e.order?[n.column,n.order]=[e.columnKey,e.order.slice(0,e.order.lastIndexOf("end"))]:[n.column,n.order]=["",""],f()}return(e,c)=>{const m=ve,X=ye,D=Ee,Y=we,Z=Ce,$=be;return De(),he($,{bordered:!1},{default:t(()=>[a(d(R),{onRegister:d(I),onSubmit:J,onReset:H},{statusSlot:t(({model:_,field:b})=>[a(m,{value:_[b],"onUpdate:value":j=>_[b]=j},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"]),a(d(ae),{columns:d(de),request:L,"row-key":_=>_.id,ref_key:"actionRef",ref:p,actionColumn:N,"onUpdate:checkedRowKeys":K,"scroll-x":3e3,onEditEnd:z,"onUpdate:sorter":Q},{tableTitle:t(()=>[a(D,{type:"primary",onClick:O},{icon:t(()=>[a(X,null,{default:t(()=>[a(d(me))]),_:1})]),default:t(()=>[ke]),_:1})]),toolbar:t(()=>[a(D,{type:"primary",onClick:f},{default:t(()=>[Pe]),_:1})]),_:1},8,["columns","row-key","actionColumn"]),a(Z,{show:i.value,"onUpdate:show":c[1]||(c[1]=_=>i.value=_),"show-icon":!1,preset:"dialog",title:s.value?"\u65B0\u589E":"\u7F16\u8F91"},{action:t(()=>[a(Y,null,{default:t(()=>[a(D,{onClick:c[0]||(c[0]=()=>i.value=!1)},{default:t(()=>[xe]),_:1}),a(D,{type:"info",loading:r.value,onClick:W},{default:t(()=>[Re]),_:1},8,["loading"])]),_:1})]),default:t(()=>[a(d(R),{ref_key:"formRef",ref:F,onRegister:d(U)},null,8,["onRegister"])]),_:1},8,["show","title"])]),_:1})}}}));export{qe as default};
